{"ast":null,"code":"var _jsxFileName = \"/Users/jinxin/GitHubRepo/graphql-play/client/src/components/AddBook.js\";\nimport React, { useState } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { gql } from \"apollo-boost\";\nimport { getAuthorsQuery, addBookMutation } from \"../queries/queries\";\n\nconst AddBook = props => {\n  const [name, setName] = useState('');\n  const [genre, setGenre] = useState(\"\");\n  const [authorId, setAuthorId] = useState(\"\");\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(getAuthorsQuery);\n  const [addBook, dataFromServer] = useMutation(addBookMutation);\n\n  const submitForm = e => {\n    e.preventDefault();\n    console.log(name);\n    addBook({\n      variables: {\n        name,\n        genre,\n        authorId\n      }\n    });\n  };\n\n  const displayAuthors = () => {\n    if (loading) {\n      return React.createElement(\"option\", {\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20\n        },\n        __self: this\n      }, \"Loading authors\");\n    } else {\n      console.log(data);\n      return data.authors.map(author => {\n        return React.createElement(\"option\", {\n          key: author._id,\n          value: author.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        }, author.name);\n      });\n    }\n  };\n\n  return React.createElement(\"form\", {\n    id: \"add-book\",\n    onSubmit: submitForm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, \"Book name:\"), React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => setName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, \"Genre:\"), React.createElement(\"input\", {\n    type: \"text\",\n    onChange: e => setGenre(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Author:\"), React.createElement(\"select\", {\n    onChange: e => setAuthorId(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Select author\"), displayAuthors())), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, \"+\"));\n};\n\nexport default AddBook;","map":{"version":3,"sources":["/Users/jinxin/GitHubRepo/graphql-play/client/src/components/AddBook.js"],"names":["React","useState","useQuery","useMutation","gql","getAuthorsQuery","addBookMutation","AddBook","props","name","setName","genre","setGenre","authorId","setAuthorId","loading","error","data","addBook","dataFromServer","submitForm","e","preventDefault","console","log","variables","displayAuthors","authors","map","author","_id","id","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { gql } from \"apollo-boost\";\nimport { getAuthorsQuery, addBookMutation } from \"../queries/queries\";\n\nconst AddBook = (props)=>{\n    const [ name, setName ]= useState('');\n    const [ genre, setGenre ] = useState(\"\");\n    const [ authorId, setAuthorId ] = useState(\"\");\n    const { loading, error, data } = useQuery(getAuthorsQuery);\n    const [addBook, dataFromServer] = useMutation(addBookMutation);\n\n    const submitForm = (e)=> {\n        e.preventDefault()\n        console.log(name);\n        addBook({ variables:{name, genre, authorId }});\n    }\n    const displayAuthors = ()=>{\n        if(loading){\n            return( <option disabled>Loading authors</option> );\n        } else {\n          console.log(data);\n            return data.authors.map(author => {\n                return( <option key={ author._id } value={author.id}>{ author.name }</option> );\n            });\n        }\n    }\n    return (\n      <form id=\"add-book\" onSubmit={submitForm}>\n        <div className=\"field\">\n          <label>Book name:</label>\n          <input type=\"text\" onChange={e => setName(e.target.value)} />\n        </div>\n        <div className=\"field\">\n          <label>Genre:</label>\n          <input type=\"text\" onChange={e => setGenre(e.target.value)} />\n        </div>\n        <div className=\"field\">\n          <label>Author:</label>\n          <select onChange={e => setAuthorId(e.target.value)}>\n            <option>Select author</option>\n            {displayAuthors()}\n          </select>\n        </div>\n        <button>+</button>\n      </form>\n    );\n}\n\nexport default AddBook;"]},"metadata":{},"sourceType":"module"}